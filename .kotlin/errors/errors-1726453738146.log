kotlin version: 2.0.0
error message: org.jetbrains.kotlin.backend.common.BackendException: Backend Internal error: Exception during IR lowering
File being compiled: /Users/danielleme/Documents/KotlinProjects/AotiosInject/lib/src/jvmMain/kotlin/sample/Sample.kt
The root cause org.jetbrains.kotlin.backend.common.CompilationException was thrown at: org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.generateNameForLiftedDeclaration$lambda$22(LocalDeclarationsLowering.kt:691)
	at org.jetbrains.kotlin.backend.common.CodegenUtil.reportBackendException(CodegenUtil.kt:253)
	at org.jetbrains.kotlin.backend.common.CodegenUtil.reportBackendException$default(CodegenUtil.kt:236)
	at org.jetbrains.kotlin.backend.common.phaser.PerformByIrFilePhase.invokeSequential(performByIrFile.kt:65)
	at org.jetbrains.kotlin.backend.common.phaser.PerformByIrFilePhase.invoke(performByIrFile.kt:52)
	at org.jetbrains.kotlin.backend.common.phaser.PerformByIrFilePhase.invoke(performByIrFile.kt:38)
	at org.jetbrains.kotlin.backend.common.phaser.NamedCompilerPhase.phaseBody(CompilerPhase.kt:166)
	at org.jetbrains.kotlin.backend.common.phaser.AbstractNamedCompilerPhase.invoke(CompilerPhase.kt:113)
	at org.jetbrains.kotlin.backend.common.phaser.CompositePhase.invoke(PhaseBuilders.kt:29)
	at org.jetbrains.kotlin.backend.common.phaser.CompositePhase.invoke(PhaseBuilders.kt:16)
	at org.jetbrains.kotlin.backend.common.phaser.NamedCompilerPhase.phaseBody(CompilerPhase.kt:166)
	at org.jetbrains.kotlin.backend.common.phaser.AbstractNamedCompilerPhase.invoke(CompilerPhase.kt:113)
	at org.jetbrains.kotlin.backend.common.phaser.CompilerPhaseKt.invokeToplevel(CompilerPhase.kt:62)
	at org.jetbrains.kotlin.backend.jvm.JvmIrCodegenFactory.invokeLowerings(JvmIrCodegenFactory.kt:358)
	at org.jetbrains.kotlin.codegen.CodegenFactory.generateModule(CodegenFactory.kt:46)
	at org.jetbrains.kotlin.backend.jvm.JvmIrCodegenFactory.generateModuleInFrontendIRMode(JvmIrCodegenFactory.kt:433)
	at org.jetbrains.kotlin.cli.jvm.compiler.pipeline.JvmCompilerPipelineKt.generateCodeFromIr(jvmCompilerPipeline.kt:241)
	at org.jetbrains.kotlin.cli.jvm.compiler.pipeline.JvmCompilerPipelineKt.compileModulesUsingFrontendIrAndLightTree(jvmCompilerPipeline.kt:140)
	at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:155)
	at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:50)
	at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:104)
	at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:48)
	at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:101)
	at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:79)
	at org.jetbrains.kotlin.cli.common.CLICompiler.execAndOutputXml(CLICompiler.kt:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.compileInProcessImpl(GradleKotlinCompilerWork.kt:391)
	at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.access$compileInProcessImpl(GradleKotlinCompilerWork.kt:85)
	at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork$compileInProcess$future$1.call(GradleKotlinCompilerWork.kt:364)
	at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork$compileInProcess$future$1.call(GradleKotlinCompilerWork.kt:363)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: org.jetbrains.kotlin.backend.common.CompilationException: Back-end: Please report this problem https://kotl.in/issue
/Users/danielleme/Documents/KotlinProjects/AotiosInject/lib/src/jvmMain/kotlin/sample/Sample.kt:1:1
Problem with `class SampleKt {
  private /* static final field */ val a$delegate: Lazy<A> = lazy<A>(lock = { // BLOCK
    local fun <anonymous>(): A {
      return A()
    }

    <jvm-indy-lambda-metafactory><Function0<A>>(samMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, implMethodReference = LazyKt::<anonymous>, instantiatedMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, extraOverriddenMethodTypes = [], shouldBeSerializable = false)
  })
  private fun <get-a>(): A {
    return #a$delegate.getValue<A>(thisRef = null, property = null)
  }

  fun m(): Any {
    return module(build = { // BLOCK
      local fun <anonymous>($this$module: Module): Any {
        $this$module.dependency<A>(resolution = { // BLOCK
          local fun <anonymous>(): A {
            return A()
          }

          <jvm-indy-lambda-metafactory><Function0<A>>(samMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, implMethodReference = SampleKt::<anonymous>, instantiatedMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, extraOverriddenMethodTypes = [], shouldBeSerializable = false)
        }) /*~> Unit */
        return $this$module.dependency<B>(resolution = { // BLOCK
          local fun <anonymous>(): B {
            return B(a = $this$module.summon<A>())
          }

          <jvm-indy-lambda-metafactory><Function0<B>>(samMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, implMethodReference = SampleKt::<anonymous>, instantiatedMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, extraOverriddenMethodTypes = [], shouldBeSerializable = false)
        })
      }

      <jvm-indy-lambda-metafactory><@ExtensionFunctionType Function1<Module, Any>>(samMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, implMethodReference = SampleKt::<anonymous>, instantiatedMethodType = &error("") /* ERROR: unsupported element type: IrRawFunctionReferenceImpl */
, extraOverriddenMethodTypes = [], shouldBeSerializable = false)
    })
  }

  fun main() {
    println(message = <get-a>().p())
  }

  open fun main(args: Array<String>) {
    main()
  }

}

`
Details: Internal error in body lowering: java.lang.ClassCastException: class org.jetbrains.kotlin.ir.declarations.impl.IrExternalPackageFragmentImpl cannot be cast to class org.jetbrains.kotlin.ir.declarations.IrDeclarationWithName (org.jetbrains.kotlin.ir.declarations.impl.IrExternalPackageFragmentImpl and org.jetbrains.kotlin.ir.declarations.IrDeclarationWithName are in unnamed module of loader java.net.URLClassLoader @520f9c19)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.generateNameForLiftedDeclaration$lambda$22(LocalDeclarationsLowering.kt:691)
	at kotlin.text.StringsKt__AppendableKt.appendElement(Appendable.kt:84)
	at kotlin.collections.CollectionsKt___CollectionsKt.joinTo(_Collections.kt:3493)
	at kotlin.collections.CollectionsKt___CollectionsKt.joinToString(_Collections.kt:3510)
	at kotlin.collections.CollectionsKt___CollectionsKt.joinToString$default(_Collections.kt:3509)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.generateNameForLiftedDeclaration(LocalDeclarationsLowering.kt:691)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.createLiftedDeclaration(LocalDeclarationsLowering.kt:710)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.transformDeclarations(LocalDeclarationsLowering.kt:652)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering$LocalDeclarationsTransformer.lowerLocalDeclarations(LocalDeclarationsLowering.kt:292)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering.lower(LocalDeclarationsLowering.kt:92)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitBody$lambda$2(Lower.kt:193)
	at org.jetbrains.kotlin.ir.declarations.StageController.restrictTo(PersistentApi.kt:11)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitBody(Lower.kt:192)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitBody(Lower.kt:171)
	at org.jetbrains.kotlin.ir.visitors.IrElementVisitor$DefaultImpls.visitExpressionBody(IrElementVisitor.kt:89)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitExpressionBody(Lower.kt:171)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitExpressionBody(Lower.kt:171)
	at org.jetbrains.kotlin.ir.expressions.IrExpressionBody.accept(IrExpressionBody.kt:21)
	at org.jetbrains.kotlin.ir.declarations.IrField.acceptChildren(IrField.kt:43)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitDeclaration(Lower.kt:180)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitDeclaration(Lower.kt:171)
	at org.jetbrains.kotlin.ir.visitors.IrElementVisitor$DefaultImpls.visitField(IrElementVisitor.kt:50)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitField(Lower.kt:171)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitField(Lower.kt:171)
	at org.jetbrains.kotlin.ir.declarations.IrField.accept(IrField.kt:40)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitClass(Lower.kt:186)
	at org.jetbrains.kotlin.backend.common.BodyLoweringVisitor.visitClass(Lower.kt:171)
	at org.jetbrains.kotlin.ir.declarations.IrClass.accept(IrClass.kt:72)
	at org.jetbrains.kotlin.backend.common.LowerKt.runOnFilePostfix(Lower.kt:150)
	at org.jetbrains.kotlin.backend.common.LowerKt.runOnFilePostfix$default(Lower.kt:143)
	at org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLowering.lower(LocalDeclarationsLowering.kt:80)
	at org.jetbrains.kotlin.backend.common.phaser.PhaseBuildersKt.makeIrFilePhase$lambda$5(PhaseBuilders.kt:114)
	at org.jetbrains.kotlin.backend.common.phaser.PhaseBuildersKt$createSimpleNamedCompilerPhase$1.phaseBody(PhaseBuilders.kt:71)
	at org.jetbrains.kotlin.backend.common.phaser.SimpleNamedCompilerPhase.phaseBody(CompilerPhase.kt:226)
	at org.jetbrains.kotlin.backend.common.phaser.AbstractNamedCompilerPhase.invoke(CompilerPhase.kt:113)
	at org.jetbrains.kotlin.backend.common.phaser.PerformByIrFilePhase.invokeSequential(performByIrFile.kt:62)
	... 31 more
Caused by: java.lang.ClassCastException: class org.jetbrains.kotlin.ir.declarations.impl.IrExternalPackageFragmentImpl cannot be cast to class org.jetbrains.kotlin.ir.declarations.IrDeclarationWithName (org.jetbrains.kotlin.ir.declarations.impl.IrExternalPackageFragmentImpl and org.jetbrains.kotlin.ir.declarations.IrDeclarationWithName are in unnamed module of loader java.net.URLClassLoader @520f9c19)
	... 67 more


